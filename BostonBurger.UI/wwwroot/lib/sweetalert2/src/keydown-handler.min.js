/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/sweetalert2@11.7.0/src/keydown-handler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import privateProps from"./privateProps.js";import{clickConfirm}from"./staticMethods/dom.js";import{DismissReason}from"./utils/DismissReason.js";import*as dom from"./utils/dom/index.js";import{callIfFunction}from"./utils/utils.js";export const removeKeydownHandler=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)};export const addKeydownHandler=(e,t,n,o)=>{removeKeydownHandler(t),n.toast||(t.keydownHandler=t=>keydownHandler(e,t,o),t.keydownTarget=n.keydownListenerCapture?window:dom.getPopup(),t.keydownListenerCapture=n.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)};export const setFocus=(e,t)=>{const n=dom.getFocusableElements();if(n.length)return(e+=t)===n.length?e=0:-1===e&&(e=n.length-1),void n[e].focus();dom.getPopup().focus()};const arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(e,t,n)=>{const o=privateProps.innerParams.get(e);o&&(t.isComposing||229===t.keyCode||(o.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?handleEnter(e,t,o):"Tab"===t.key?handleTab(t):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(t.key)?handleArrows(t.key):"Escape"===t.key&&handleEsc(t,o,n)))},handleEnter=(e,t,n)=>{if(callIfFunction(n.allowEnterKey)&&t.target&&e.getInput()&&t.target instanceof HTMLElement&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;clickConfirm(),t.preventDefault()}},handleTab=e=>{const t=e.target,n=dom.getFocusableElements();let o=-1;for(let e=0;e<n.length;e++)if(t===n[e]){o=e;break}e.shiftKey?setFocus(o,-1):setFocus(o,1),e.stopPropagation(),e.preventDefault()},handleArrows=e=>{const t=dom.getConfirmButton(),n=dom.getDenyButton(),o=dom.getCancelButton();if(document.activeElement instanceof HTMLElement&&![t,n,o].includes(document.activeElement))return;const r=arrowKeysNextButton.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;for(let e=0;e<dom.getActions().children.length;e++){if(s=s[r],!s)return;if(s instanceof HTMLButtonElement&&dom.isVisible(s))break}s instanceof HTMLButtonElement&&s.focus()},handleEsc=(e,t,n)=>{callIfFunction(t.allowEscapeKey)&&(e.preventDefault(),n(DismissReason.esc))};
//# sourceMappingURL=/sm/b29f4e5ff19a421b872c4895dbe2f4d157fcb9d027cd4dbb0bf15e3f07e19b5d.map